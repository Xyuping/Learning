# 操作系统( B 站)

## 第一讲 操作系统概述

软件分为

- 系统软件(直接管理硬件,也管理应用软件).
	- 操作系统是系统软件中最重要的软件
	- 加载在硬件上的第一层软件
- 应用软件



接口:既有软件接口,也有硬件接口



### 学习内容

- 操作系统引论
- 进程管理
- 处理机的调度与死锁
- 存储器管理
- 设备管理
- 文件管理



### 第一章 操作系统引论

### 什么是操作系统

- ##### 操作系统是一组控制和管理计算机硬件和软件资源

- ##### 合理地对各类作业进行调度,

- ##### 以及方便用户使用的程序集合

- DOS 也是操作系统

#### 操作系统设计目标

- ##### *方便性*(目前最重要)

- ##### *有效性*

	- 让计算机忙起来,资源得到有效的利用
	- 数据有序而节省存储空间
	- 合理地阻止计算机工作流程

- ##### 可扩充性

	- 适应硬件与网络发展要求
	- 应采用层次化结构

- ##### 开放性

### 操作系统作用

- ##### 用户(程序)与硬件系统的接口

	- 软件接口给用户提供了三种方式(使用计算机)
		1. 命令方式
		2. *系统调用方式*(类似于函数调用)
		3. 图形,窗口方式

- ##### 计算机四类资源(硬件资源)的管理者

	- 处理机管理
	- 存储器管理
	- 设备管理(I/O 设备)
	- 文件管理(文件的保护和共享,存取)

- ##### 用作扩充机器

	- 裸机:无任何软件,只有硬件的计算机系统
	- 扩充机器:加载了软件的机器,又称虚拟机



### 操作系统发展过程

- 无操作系统的计算机系统
- 单道批处理系统
	- 自动型:无人工干预,在监督程序的控制下连续处理
	- 顺序性:按进入内存的先后执行
	- 单道性:内存中只保持一道作业,每次只处理一道作业
	- 最大缺点:系统资源利用率太低
- *多道批处理系统*(基本操作系统类型) 60年代
	- 多道:内存中跟同时存放多个相互独立的程序
	- *多道技术是共享的基础*
	- 多道性:内存中有多道程序,可并发执行
	- 无序性:完成时间与进入内存先后无关
	- 调度性:作业从提交(指的是送到系统外存)到完成经过两次调度
		- 作业调度  外存->内存(选多个作业)
		- *进程调度* 分配处理机(选一个作业)
	- 作业:常用于批处理系统的概念,单位是道.   中间步骤叫做作业步
	- 优点:
		- 资源利用率高
		- 系统吞吐量大
			- 原因:资源忙;作业完成或运行不下去时才切换
	- 缺点:
		- 平均周转时间长(从作业进入系统开始到完成并退出系统经历的时间),通常几小时,甚至几天.
		- 无交互能力:不能在作业运行时修改和调试
- *分时系统*(基本操作系统类型) 60年代
	- 一台主机,上面连接了多个终端,同时允许多个用户通过自己的终端(输入输出设备),以交互方式使用计算机,共享主机中的资源
	- 多路性:即同时性.宏观上同时微观上轮流
	- 独立性:每个用户感觉独占主机
	- 及时性:2-3秒之内
- *实时系统*(基本操作系统类型) 60年代
	- 及时响应外部事件请求(更强调反应时间,甚至毫秒级)
	- 应用需求:
		- 实时控制:工业生产,武器控制,飞机自动驾驶
		- 实时信息处理:数据库系统(如订票系统)
- 通用,网络,分布式操作系统(以基本操作系统为基础)



### 操作系统基本特征

- 并发性(最重要特征):
	- 并行性:多个事件在同一时刻发生
	- 并发性:多个事件在同一时间间隔内发生
	- 单处理机系统:宏观并发微观串行
	- 多处理机系统:可能有并行
- 共享性(多道技术是共享的基础)
	- 互斥共享方式:对临界资源的访问.(每次只能单个进程)
		- 临界资源:一次只允许一个进程访问.如打印机等硬件;栈,变量,表格等软件
	- 同时访问方式(允许多个进程同时访问)
		- 多个进程同时访问的资源,如:磁盘,重入码写的文件
- 虚拟性
	- 通过某种技术把一个物理实体变为若干个逻辑上的对应物(目前多通过分时实现)
	- 如:虚拟处理器,虚拟内存等
- 异步性
	- 进程以不可预知的速度向前推进



### 操作系统的五大功能

- 资源管理
	1. 处理机管理(硬)
	2. 存储器管理(硬)
	3. 设备管理(硬)
	4. 文件管理(软)

5.用户接口

1. 命令接口
	1. 联机用户接口(基本所有计算机操作系统都适用)
		- 组成:命令+中断处理程序+命令解释程序
		- 过程:
			1. 用户在键盘上输入命令
				- 联机用户命令举例:
					- UNIX( 分时系统):login,logout
					- DOS:copy,format
			2. 终端处理程序接收明星并显示在屏幕上
			3. 命令解释程序解释并执行该命令
				- 命令解释程序:操作系统的最高层(最外层)
				- 比如: MS-DOS:COMMAND.COM; UINX:SHELL.
	2. 脱机用户接口(预输入)
		- 适用于批处理系统.所以又称批处理用户接口
		- 组成: JCL+作业说明书+命令解释程序
			- JCL: 作业控制语言
		- 过程:
			1. 用户把对作业的控制用 JCL 写在作业说明书上,包括错误处理等(在执行过程中不允许用户交互)
			2. 命令解释程序按照作业说明书解释并执行
2. 程序接口
	- 目的:为用户程序访问系统资源二设置
	- 组成:一组系统调用
	- 系统调用:一个系统调用就是一个能完成特定功能的子程序(例如 c 语言的每个库函数都对应一个系统调用)
3. 图形接口

### 操作系统的结构设计

操作系统发展阶段:

1. 无结构 OS(传统 OS 结构)
2. 模块化 OS 结构(传统 OS 结构)
3. 分层式 OS 结构(传统 OS 结构)
4. 微内核 OS 结构





## 第四讲 进程管理

### 进程的基本概念

(程序运行的动态过程)

- 程序在并发环境中的执行过程
- 资源分配和独立运行的基本单位



> 程序顺序执行的特征

- 顺序性:处理机的操作严格按照程序所规定的顺序执行,即每一个操作必须在下一操作之前结束

- 封闭性:程序在封闭环境下执行,结果不收外界因素影响(系统的所有资源都由正在执行的程序决定)
- 可再现性:只要环境和初始条件相同,程序重复执行时总得到相同的结果

> 程序并发执行

- 间断性:共享,合作,制约导致
	- 执行-暂停-执行
- 失去封闭性:资源状态由多程序改变
- 不可再现性:相同环境和初始条件,重复执行结果不同

避免不可再现性,由操作系统完成.引入进程的概念

#### 进程的特征

1. 结构性
2. 动态性
3. 并发性
4. 独立性
5. 异步性

#### 进程结构

> PCB(进程控制块),相当于进程头脑,是进程动态特征的集中反映
>
> 程序段
>
> 数据段
>
> 进程运行的时候,PCB 常驻内存,程序段和数据段有可能在外存中动态调入内存

#### 动态性

- 进程最基本的特征是动态性
- 进程的生命周期:
	- 进程由创建而产生,由调度(特指进程调度而执行,由撤销而消亡的过程

#### 并发性

多个进程同在内存中,且能在一段时间内同时运行

#### 独立性

进车格式一个能独立运行,独立分配资源,独立接收调度的基本单位

#### 异步性

进程按各自独立的,不可预知的速度向前推进

#### 进程定义

进程是进程实体的运行过程,是系统进行资源分配和调度的基本单位

#### 进程和程序的关系

- 进程是一个动态概念,程序是一个静态概念
- 进程具有并行特征,程序没有
- 进程是竞争资源的基本单位
- 一个程序对应对个进程,一个进程为多个程序服务

### 进程的三种基本状态

1. 就绪状态
	- 进车哥已经分配了除处理机意外的所有必要资源,只要再获得处理机就能够执行的状态
	- 就绪队列
2. 执行状态
	- 已经获得 CPU 正在运行
	- 单处理机系统只有一个进程处于执行状态,多处理机系统可以有多个
3. 阻塞状态
	- 正在执行的程序由于发生某事件二暂时无法继续执行时,放弃处理进入的状态,又称等待状态
	- 引起阻塞的事件:请求 I/O, 申请缓存

## 第五讲

### 进程的基本状态转换

都在内存中

![cion](https://ws2.sinaimg.cn/large/006tKfTcly1g1887tmwejj31400u044p.jpg)

#### 挂起状态

引入原因:

1. 终端用户请求
2. 父进程请求
3. 负荷调节需要(主要指实时操作系统.进程有结构的,会占有内存)
4. 操作系统的需要

挂起状态可以理解为进程的静止状态(被调到了外存)

![icon](https://ws2.sinaimg.cn/large/006tKfTcly1g18883ieukj31400u0n6b.jpg)



### 进程控制块

回忆:进程结构

> PCB(进程控制块)
>
> 程序段
>
> 数据段

PCB

- OS 中最重要的*记录型*结构
- OS 用 PCB 对并发进程进行管理和控制
	- (当一个进程产生的时候,就有 PCB,PCB 常驻内存,操作系统就知道这个进程的存在了)
- PCB 是进程存在的唯一标志( PCB 产生则进程产生, PCB消亡则进程消亡)
- PCB 常驻内存
- OS 专门开辟 PCB 区将所有的 PCB 组织成若干个链表或队列

#### 结构体

PCB 是一种结构体类型

#### PCB中的信息

1. ##### 进程标识符

	1. 内部标识符:进程唯一的数字编号,给 OS 使用
	2. 外部标识符:由字母数字组成,给用户使用                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           

2. ##### 处理机状态

	- 处理机中主要的寄存器
		1. 通用寄存器:暂存信息用
		2. 指令计数器:访问下一条指令地址
		3. 程序状体字 PSW: 条件码,执行方式(在什么状态下执行,系统态或用户态),中断屏蔽标志(是否允许在执行过程中被打断)
		4. 用户栈指针:用户进程拥有的系统栈,存放过程和系统调用参数及调用地址

3. ##### 进程调度信息(选择一个进程占用处理机)

	- 进程状态
	- 进程优先级
	- 与调度算法有关信息
	- 事件  如:阻塞原因

4. ##### 进程控制信息

	- 程序和数据地址
	- 进程同步和通信机制
	- 资源清单:除 CPU 之外的所需资源与已经分配资源清单(进程执行过程中动态分配资源,并不需要一次性分配所有资源)
	- 链接指针:本进程 PCB 所在队列的下一个地址(指向下一个进程 PCB 地址)

#### PCB 组织方式

1. ##### 链接方式

	把统一状态的 PCB, 用其中的链接字链接成一个队列.如:执行队列,就绪队列,阻塞队列(根据不同阻塞原因),空白队列(各个操作系统都有最大允许存在的进程数,除了执行的就绪的阻塞的,还有一些只有 PCB 还没有产生的进程)

	PCB 在内存中是杂乱无章存放的

	![icon](https://ws1.sinaimg.cn/large/006tKfTcly1g188888s8ej31400u0qci.jpg)

2. ##### 索引方式

	建立就绪索引表,阻塞索引表等.把*索引表*在内存的首地址放在内存的专用单元中

	![icon](https://ws1.sinaimg.cn/large/006tKfTcly1g1888950ckj31400u0tgr.jpg)



## 第六讲

### 进程控制

- 进程管理中最基本的功能是进程控制
- 进程控制的任务:
	- *进程的创建,终止,进程状态的转变*等
	- 进程控制一般由 OS 内核来实现

#### 进程图

树状结构,家族关系

子孙进程可以继承父进程的资源(比如缓冲区,数据等)

#### 引起创建进程的事件

1. 用户登录(比如分时系统,输入用户名和密码通过验证后,会为用户创建一个进程.相当于进程图中的根节点.用户要干什么的时候,再继续添加子孙节点)
2. 作业调度(批处理操作系统):从外存将一个(单道批处理)或多个(多道批处理)作业调到内存的过程.
3. 提供服务(操作系统为用户提供服务,比如 打印,计算等)
4. 应用请求

前三个是由系统内核创建的,第四个主要由进程自己创建自己的子进程

#### 进程的创建

- 原语 CREAT()按下述步骤创建一个新进程:
	1. 申请空白 PCB.(如果没申请到(比如说系统进程饱和),操作失败)
	2. 为新进程分配资源(资源清单在 PCB)
	3. 初始化进程控制块
		1. 进程标识信息
		2. 处理块状态信息
		3. 进程调度信息
		4. 进程控制信息
	4. 将新进程插入 *就绪队列*

##### PCB 的初始化

1. 初始化标识信息(内部,外部)
2. 初始化处理机状态信息
3. 初始化处理机控制信息(置成就绪状态)

##### 引起进程终止的事件

1. 正常结束(正常死亡):完成所有该做的功能,释放资源
2. 异常结束(病死)
	1. 越界异常
	2. 保护错(权限,比如只读文件你写了)
	3. 非法指令
	4. 特权指令错
	5. 运行超时
	6. 等待超时
	7. 算术运算错
	8. I/O 故障
3. 外界干预(他杀)
	1. 操作员或 OS 干预(下达终止进程命令)
	2. 被父进程终止(父进程可以任意调度和终止子进程)
	3. 父进程终止,子孙进程也会终止

每当一个进程终止,操作系统都要发一个死亡证明,确实消失,释放资源,注销户口

##### 进程终止过程

1. 从 PCB 集合中检索出该进程的 PCB( 根据内部标识),从中读出该进程的状态
2. 若处于执行状态,终止该进程的执行,并置调度标志为真,重新调度其他进程
3. 若有子孙进程,将所有子孙进程终止
4. 将进程的全部资源归还其父进程或系统
5. 将 PCB 从所在队列或链表中移出

##### 引起阻塞和唤醒的事件

阻塞是自己引起的不是系统(自己阻塞自己),引起阻塞事件(I/O):

- 请求系统服务
- 启动某种操作                                   
- 新数据尚未到达
-  无新工作可做

##### 进程阻塞过程

由阻塞原语 BLOCK 完成

1. 入口
2. 保存当前进程的 CPU 现场(寄存器...)
3. 置该进程状态(将执行状态置为阻塞状态)
4.  PCB进入等待( 阻塞)队列
5. 转进程调度(调度别的进程占有 CPU)

##### 进程唤醒过程

由唤醒原语 WAKEUP 完成

1. 入口
2. 从等待队列中摘下被唤醒的进程
3. 置该进程为就绪态
4. 进入就绪队列
5. 转进程调度或返回(优先级)

注意 BLOCK 和 WAKEUP 是一对作用相反的原语

阻塞原语是自己调用,(自己阻塞自己).唤醒原语是由其他合作进程调用.(其他进程唤醒自己,自己无法唤醒自己.如果没有别的进程唤醒他,被阻塞进程将会因不能被唤醒而长久地处于阻塞状态,从而无机会再被执行)



## 第七讲

### 进程的挂起

挂起原语: SUSPEND()

挂起原语的执行过程

- 检查被挂起进程的状态
	- 若处于活动就绪状态,改为静止就绪状态
	- 若处于活动阻塞状态,改为静止阻塞
	- 若正在执行,则改为静止就绪状态,并转向调度程序重新调度

### 进程的两种制约关系

1. ##### 间接制约(互斥)

	- 进程间由于共享某种系统资源而形成的相互制约

		> 进程 A <-> *资源* <-> 进程 B

2. ##### 直接制约(同步)

	- 进程间由于合作而形成的相互制约

	> 进程A <-> 进程 B (中间有数据通信)

互斥:并发之心光的多个进程由于竞争统一资源而产生的相互排斥的关系(需要协调各个互斥进程使用资源的时间关系)

同步:进程间共同完成一项任务时直接发生相互作用的关系.(在执行时间上必须按一定的顺序协调进行)



#### 临界资源

一次仅允许一个进程使用的共享资源,如:打印机,磁带机,表格

#### 临界区

在每个进程中访问临界资源的*那段*程序(不是全部程序,比如说 print 语句)

进程必须互斥进入临界区(按顺序执行,每次只能一段程序进入)

#### 访问临界区的循环进程描述

![icon](https://ws4.sinaimg.cn/large/006tKfTcly1g1887ywv4xj31400u0k0m.jpg)

#### 同步机制遵循的原则

1. 空闲让进(这个进程使用完*临界资源*,马上去调用另一个在申请这个资源的进程)
2. 忙则等待
3. 有限等待
4. 让权等待(正在执行的进程,执行到临界区时,如果申请不到临街资源,必须放弃 CPU 进入等待(阻塞)状态)

#### 信号量机制

- 信号量是一种数据结构
- 信号量的值与相应的资源的使用情况有关(类似红绿灯)
- 信号量的值仅由 P, V 操作改变(原语)



## 第八讲

信号量实现方法

都是针对*临界资源*

#### 整型信号量S

- 整型数(小于零不可用,大于零可用)
- P 操作( wait) 原语               申请
- V 操作( signal 释放)原语    释放

原语优点:简单,容易实现

wait(s)和 signal(s)是原子操作(执行中不允许任何中断)

 只要信号量 S<=0就不断测试,*不满足让权等待*

![icon](https://ws1.sinaimg.cn/large/006tKfTcly1g18889lfulj31400u0af4.jpg)

#### 记录型信号量(当前用的最多)

  S.value>=0时,代表系统中可用资源的数目

S<0时,绝对值代表等待使用资源的进程个数(已阻塞的进程数量)

S.value 初值为1时:只允许一个进程访问临街资源,是互斥信号量

满足了让权等待

![icon](https://ws1.sinaimg.cn/large/006tKfTcly1g18886df1rj31400u0q9f.jpg)

##### wait(s)

![icon](https://ws2.sinaimg.cn/large/006tKfTcly1g1888bu78qj31400u0wqw.jpg)

##### signal(s)

![icon](https://ws2.sinaimg.cn/large/006tKfTcly1g18880rnoej31400u0dov.jpg)



#### 死锁

比如说 进程 A 和 B 都需要同时占有打印机和磁带机才能完成工作,此时 A 占有了打印机, B 占有了磁带机, 谁都无法开始工作,处于僵持状态.  死锁了.  会死机

这种死锁状态是记录型信号量带来的.解决方法:

#### AND 型信号量

基本思想:将进程在整个运行中需要的所有资源一次性全部分配给进程,待进程使用完后一起释放



## 第九讲 PV 操作 消费者问题

两个互斥进程(共享资源)为例

![icon](https://ws4.sinaimg.cn/large/006tKfTcly1g1887zwmpoj31400u07ic.jpg)



![icon](https://ws1.sinaimg.cn/large/006tKfTcly1g1887y1anpj31cc0u0q9d.jpg)



> 在实现互斥时注意:
>
> - wait(mute)和 signal(mutex)必须成对地出现
> 	- 却缺wait 将会引起系统混乱,不能保证对临界资源的互斥访问
> 	- 缺 signal 将会使该临界资源永久不被释放,某些进程永远处于阻塞状态

###  经典的同步问题

- #### 生产者-消费者问题

- #### 读者-写者问题

- #### 哲学家进餐问题

####  1.生产者-消费者问题

> 一组生产者进程生产产品(信息或数据)给一组消费者进程消费.为使他们并发执行,设一个有 n 个缓冲区的缓冲池,生产者一次向一个缓冲区中投入消息,消费者从一个缓冲区中取得消息.生产者-消费者问题实际上是相互合作进程关系的一种抽象.
>
> 例如,在输入时,输入进程是生产者,计算进程是消费者;在输出时,计算进程是生产者,打印进程是消费者

制约关系

- 不允许消费者进程到一个空缓冲区中取产品(空不代表没数据,只是数据无效)
- 不允许生产者进程到一个已满且还没被取走的缓冲区中投放产品(会误删除原数据)

##### 用记录型信号量解决生产者-消费者问题

设有 n 个缓冲区,每个缓冲区存放一个信息,用互斥信号量 mutex 对缓冲池实现互斥访问(即生产者和消费者不能同时访问)

利用资源信号量 empty 和 full分别表示缓冲池中空缓冲区以及满缓冲区的数量,又假定这些生产者和消费者相互等效,只要缓冲池未满,生产者就可以将消息送入缓冲池;只要缓冲池未空,消费者就可以从缓冲池取走一个消息

(资源信号量用来做同步用)

![icon](https://ws2.sinaimg.cn/large/006tKfTcly1g18881wtwzj31400u0wrw.jpg)

## 第十讲

### 生产者

![icon](https://ws1.sinaimg.cn/large/006tKfTcly1g18898ft49j31400u0h0m.jpg)

### 消费者

![icon](https://ws2.sinaimg.cn/large/006tKfTcly1g18887fkbcj31400u0qdb.jpg)

### 注意

1. 每个程序中互斥的 wait(mutex)和 signal(mutex)必须成对出现
2. 对资源信号量 empty 和 full 的 P V 操作成对出现,但是他们分别处于不同的程序中.例如 P 在计算进程中, V 在打印进程中,计算进程若因执行 P 而阻塞,则以后将由打印进程将他唤醒

这主要是因为,互斥是时间关系,而同步(资源信号量)是合作关系.合作就要拆开









## 第十一讲 进程通信

#### 根据通信的信息量多少可分为:

1. 低级通信:进程的互斥和同步
2. 高级通信:用户可直接利用 os 提供的一组通信命令,高效地传送大量数据的一种通信方式.对用户透明.

#### 高级通信分类

1. 共享存储器系统
2. 消息传递系统
3. 管道通信

### 共享存储器系统

1. 共享数据结构:进程之间通过某种数据结构,例如缓冲池.属于 *低级通信方式*
2. 共享存储区:在存储器中划出一块共享存储区,进程可通过对共享存储区进行读或写来实现通信(传送大量信息),属于高级通信方式

### 消息传递系统

信息传递系统信息交换的单位是消息或报文,分成两种:

#### 1.直接通信方式

![](https://ws4.sinaimg.cn/large/006tKfTcly1g1888atrzej31400u0amd.jpg)

![img_0805](https://ws2.sinaimg.cn/large/006tKfTcly1g188847s99j31400u0ah8.jpg)

#### 2.间接通信方式

![fullsizerender(https://ws1.sinaimg.cn/large/006tKfTcly1g1887uait6j31400u0wtg.jpg)](/Users/xyp/Desktop/学习/02_笔记/操作系统笔记/img/fullsizerender(24).jpg)

![fullsizerender(https://ws3.sinaimg.cn/large/006tKfTcly1g18882r2idj31400u0k1v.jpg)](/Users/xyp/Desktop/学习/02_笔记/操作系统笔记/img/fullsizerender(26).jpg)

![fullsizerender(https://ws4.sinaimg.cn/large/006tKfTcly1g18885m2usj31400u0wnn.jpg)](/Users/xyp/Desktop/学习/02_笔记/操作系统笔记/img/fullsizerender(25).jpg)



##### 信箱

1. 私用信箱
  - 该进程自己创建,这个信箱是进程结构的一部分
  - 只允许一个进程使用,拥有者可以读取,其他用户只能发送
  - 单向通信链路(只能由发送者传向接受者)
  - 进程结束( PCB 消失),信箱也消失
2. 公用信箱
  - 操作系统创建
  - 提供给系统中所有核准进程使用(有权限)
  - 进程既可以发送,也可以接收
  - 双向通信链路
  - 系统运行期间始终存在
3. 共享信箱
  - 由某进程创建,创建时提共享进程(用户)的名字
  - 信箱的拥有者和共享者都有权从信箱中取走发送给自己的消息

##### 信箱通信时发送进程和接收进程的关系:

1. ###### 一对一

	- 建立一条专用的通信链路
	- 私用信箱

2. ###### 多对一

	- 服务进程与多个用户进程之间进行交互,又称客户/服务器交互

3. ###### 一对多

	- 一个发送进程与多个接收进程进行交互,发送进程可用广播形式

4. ###### 多对多

	- 建立一个公用信箱,多个进程投递并取走自己的消息

### 管道通信

> 管道通信方式建立在文件系统的基础上,利用共享文件来连接两个相互通信的进程,此*共享文件*称为管道
>
> 管道是指用于连接一个读进程和一个写进程,以实现它们之间通信的*共享文件*
>
> 文件系统放在外存

![fullsizerender(https://ws3.sinaimg.cn/large/006tKfTcly1g1887uxo9ij31dg0mujv2.jpg)](/Users/xyp/Desktop/学习/02_笔记/操作系统笔记/img/fullsizerender(21).jpg)

#### 管道通信必须的协调能力

- 互斥
	- 当一个进程正在对管道进行读/写,另一个进程必须等待
- 同步(制约关系)
	- 当写(输入)进程把一定量数据写入管道后,便去睡眠等待,直到读(输出)进程取走数据后再把它唤醒.当读进程发现管道空时也应睡眠等待,直到写进程将消息写入管道后才将他唤醒.
- 判断对方是否存在(有读进程就要有写进程)

## 第12讲 线程

> 多用于多 CPU 系统和网络操作系统(进程间操作非常多,要求并发性非常强)

![img_0810](https://ws4.sinaimg.cn/large/006tKfTcly1g1887vz9c0j31400u0ag6.jpg)

![img_0812](https://ws2.sinaimg.cn/large/006tKfTcly1g1887x13nvj31400u07fh.jpg)

### 线程

- 轻型实体:线程中的实体不拥有系统资源
- 独立调度和分派的基本单位,线程的切换非常迅速,开销小
- 可并发执行:一个进程内部包含多个线程,多个线程可以同时并发执行,而且还可以和其他进程的线程并发执行
- 共享进程资源